#include <libftmatrices.h>

void	ft_mat4x4_set_projection(t_mat4x4 m, const double array[4])
{
	double	fov;
	double	ratio;
	double	near;
	double	far;
	double	right, left, top, bottom;

	fov = array[0];
	ratio = array[1];
	near = array[2];
	far = array[3];

	top = near * tan((M_PI / 180.) * (fov / 2));
	bottom = -1 * top;
	right = top * ratio;
	left = -1 * right;

	printf("fov : %f\n", fov);
	printf("ratio : %f\n", ratio);
	printf("near : %f\n", near);
	printf("far : %f\n", far);

	printf("top : %f\n", top);
	printf("bottom : %f\n", bottom);
	printf("right : %f\n", right);
	printf("left : %f\n", left);

	ft_mat4x4_set_zero(m);
	m[0][0] = (2 * near) / (right - left);
	m[0][1] = 0;
	m[0][2] = (right + left) / (right - left);
	m[0][3] = 0;

	m[1][0] = 0;
	m[1][1] = (2 * near) / (top - bottom);
	m[1][2] = (top + bottom) / (top - bottom);
	m[1][3] = 0;

	m[2][0] = 0;
	m[2][1] = 0;
	m[2][2] = -1 * (far + near) / (far - near);
	m[2][3] = -1 * (2 * far * near) / (far - near);

	m[3][0] = 0;
	m[3][1] = 0;
	m[3][2] = -1;
	m[3][3] = 0;
}
